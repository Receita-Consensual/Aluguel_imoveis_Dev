â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                â•‘
â•‘     ğŸš€ COMANDOS PARA COPIAR E COLAR NO SERVIDOR LINUX         â•‘
â•‘                                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ INSTALAÃ‡ÃƒO RÃPIDA (COPIE TUDO DE UMA VEZ):

# 1. Instalar dependÃªncias do sistema
sudo apt update && sudo apt install -y python3 python3-pip python3-venv chromium-browser chromium-chromedriver git

# 2. Ir para home
cd ~

# 3. Clonar repositÃ³rio (SE TIVER NO GITHUB)
git clone https://github.com/SEU_USUARIO/SEU_REPO.git lugar-motor
cd lugar-motor

# OU criar pasta (SE FOR COPIAR MANUALMENTE)
mkdir -p ~/lugar-motor
cd ~/lugar-motor
# Agora use FileZilla/WinSCP para copiar arquivos

# 4. Criar ambiente virtual
python3 -m venv venv
source venv/bin/activate

# 5. Instalar dependÃªncias Python
pip install selenium beautifulsoup4 python-dotenv requests supabase geopy

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” CONFIGURAR VARIÃVEIS DE AMBIENTE:

# Criar arquivo .env
nano .env

# Cole isto (TROQUE AS KEYS PELAS SUAS):
SUPABASE_URL=https://zprocqmlefzjrepxtxko.supabase.co
SUPABASE_SERVICE_KEY=sua_service_key_completa_aqui
GOOGLE_GEOCODING_KEY=AIzaSyCws8dm1mPhPKdu4VUk7BTBEe25qGZDrb4

# Salvar: CTRL+O, ENTER, CTRL+X

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§ª TESTAR O MOTOR:

cd ~/lugar-motor
source venv/bin/activate
python3 motor_busca/motor.py

# Se funcionar, verÃ¡:
# - "Buscando demandas pendentes..."
# - "Scraping iniciado..."
# - "X imÃ³veis salvos"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â° OPÃ‡ÃƒO 1: RODAR A CADA HORA (CRON - SIMPLES):

# Editar cron
crontab -e

# Adicionar esta linha (TROCAR SEU_USUARIO):
0 * * * * cd /home/SEU_USUARIO/lugar-motor && /home/SEU_USUARIO/lugar-motor/venv/bin/python3 motor_busca/motor.py >> /home/SEU_USUARIO/motor.log 2>&1

# Salvar: CTRL+O, ENTER, CTRL+X

# Ver logs depois:
tail -f ~/motor.log

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”„ OPÃ‡ÃƒO 2: RODAR AUTOMATICAMENTE (SYSTEMD - PROFISSIONAL):

# Usar script automÃ¡tico
cd ~/lugar-motor
bash criar_servico.sh

# Ou manual - criar serviÃ§o
sudo nano /etc/systemd/system/lugar-motor.service

# Cole isto (TROCAR SEU_USUARIO):
[Unit]
Description=Motor de Busca Lugar
After=network.target

[Service]
Type=simple
User=SEU_USUARIO
WorkingDirectory=/home/SEU_USUARIO/lugar-motor
Environment="PATH=/home/SEU_USUARIO/lugar-motor/venv/bin"
ExecStart=/home/SEU_USUARIO/lugar-motor/venv/bin/python3 /home/SEU_USUARIO/lugar-motor/motor_busca/motor.py
Restart=always
RestartSec=3600

[Install]
WantedBy=multi-user.target

# Salvar: CTRL+O, ENTER, CTRL+X

# Ativar serviÃ§o
sudo systemctl daemon-reload
sudo systemctl enable lugar-motor
sudo systemctl start lugar-motor

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š MONITORAR O MOTOR:

# Ver status (systemd)
sudo systemctl status lugar-motor

# Ver logs em tempo real
tail -f ~/motor.log

# Ver Ãºltimas 50 linhas
tail -n 50 ~/motor.log

# Ver processos rodando
ps aux | grep motor

# Ver prÃ³xima execuÃ§Ã£o (timer)
systemctl list-timers | grep lugar

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ› ï¸ COMANDOS DE MANUTENÃ‡ÃƒO:

# Parar motor
sudo systemctl stop lugar-motor

# Reiniciar motor
sudo systemctl restart lugar-motor

# Desabilitar motor
sudo systemctl disable lugar-motor

# Atualizar cÃ³digo (se no Git)
cd ~/lugar-motor
git pull origin main
sudo systemctl restart lugar-motor

# Reativar ambiente virtual
cd ~/lugar-motor
source venv/bin/activate

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš¨ TROUBLESHOOTING:

# Motor nÃ£o roda - verificar Python
python3 --version

# Motor nÃ£o roda - verificar dependÃªncias
cd ~/lugar-motor
source venv/bin/activate
pip list

# Motor nÃ£o roda - verificar .env
cat ~/lugar-motor/.env

# Motor nÃ£o roda - testar conexÃ£o Supabase
cd ~/lugar-motor
source venv/bin/activate
python3 -c "from motor_busca.config import SUPABASE_URL; print(SUPABASE_URL)"

# ChromeDriver nÃ£o funciona
sudo apt install chromium-browser chromium-chromedriver -y

# Erro de permissÃ£o
chmod +x motor_busca/motor.py

# Ver logs de erro (systemd)
sudo journalctl -u lugar-motor -n 100

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ ESTRUTURA DE ARQUIVOS NO SERVIDOR:

~/lugar-motor/
â”œâ”€â”€ motor_busca/
â”‚   â”œâ”€â”€ motor.py          â† Script principal
â”‚   â”œâ”€â”€ config.py         â† ConfiguraÃ§Ãµes
â”‚   â”œâ”€â”€ db.py             â† ConexÃ£o Supabase
â”‚   â”œâ”€â”€ scraper_sapo.py   â† Scraper Sapo
â”‚   â”œâ”€â”€ scraper_idealista.py â† Scraper Idealista
â”‚   â”œâ”€â”€ geocoder.py       â† Geocoding
â”‚   â””â”€â”€ requirements.txt  â† DependÃªncias
â”œâ”€â”€ venv/                 â† Ambiente virtual Python
â”œâ”€â”€ .env                  â† SUAS CREDENCIAIS (nÃ£o commitar!)
â””â”€â”€ motor.log             â† Logs de execuÃ§Ã£o

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ CHECKLIST DE INSTALAÃ‡ÃƒO:

[ ] 1. Python 3 instalado
[ ] 2. ChromeDriver instalado
[ ] 3. Pasta ~/lugar-motor criada
[ ] 4. CÃ³digo copiado/clonado
[ ] 5. Ambiente virtual criado (venv)
[ ] 6. DependÃªncias instaladas (pip)
[ ] 7. Arquivo .env configurado
[ ] 8. Teste manual funcionou
[ ] 9. Cron ou Systemd configurado
[ ] 10. Logs sendo gerados

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¡ DICAS:

1. Use "screen" para deixar processos rodando:
   screen -S motor
   python3 motor_busca/motor.py
   # CTRL+A, D para desanexar
   screen -r motor  # para voltar

2. Redirecionar logs:
   python3 motor_busca/motor.py > motor.log 2>&1

3. Rodar em background:
   nohup python3 motor_busca/motor.py &

4. Ver uso de recursos:
   htop  # (instalar: sudo apt install htop)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ COMANDOS DE EMERGÃŠNCIA:

# Parar tudo que estÃ¡ rodando relacionado ao motor
pkill -f motor.py

# Limpar logs antigos
> ~/motor.log

# Remover serviÃ§o completamente
sudo systemctl stop lugar-motor
sudo systemctl disable lugar-motor
sudo rm /etc/systemd/system/lugar-motor.service
sudo systemctl daemon-reload

# Remover cron
crontab -e
# Deletar linha com motor.py

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… VERIFICAÃ‡ÃƒO FINAL:

Depois de configurar, verifique:

1. Motor rodou pelo menos uma vez:
   cat ~/motor.log

2. Dados chegaram no Supabase:
   # Ver no Supabase Dashboard â†’ Table Editor â†’ imoveis

3. ServiÃ§o estÃ¡ ativo:
   sudo systemctl status lugar-motor

4. PrÃ³xima execuÃ§Ã£o agendada:
   systemctl list-timers

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“š DOCUMENTAÃ‡ÃƒO COMPLETA:

- INSTALAR_MOTOR_SERVIDOR.md  â†’ Guia passo a passo detalhado
- instalar_servidor.sh        â†’ Script de instalaÃ§Ã£o automÃ¡tica
- criar_servico.sh            â†’ Script para criar serviÃ§o systemd

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ãšltima atualizaÃ§Ã£o: 2026-02-07
Sistema testado: Ubuntu 20.04, 22.04, Debian 11

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ğŸ‰ BOA SORTE COM A INSTALAÃ‡ÃƒO!                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
